# CVE-2024-45519

CVE-2024-45519是Zimbra Collaboration（ZCS）中的一个高危漏洞，存在于其postjournal服务中。当该服务被启用时，未经身份验证的攻击者可以通过构造特定的SMTP请求，远程执行任意命令，从而完全控制受影响的服务器。 

该漏洞的危害在于：

- **远程命令执行**：攻击者无需身份验证即可在目标服务器上执行任意命令，可能导致数据泄露、服务中断或进一步的恶意活动。

- **广泛利用**：自漏洞披露以来，已有多起利用该漏洞的攻击事件被报道，显示其被广泛利用的风险。 

- **影响范围广泛**：受影响的Zimbra版本包括8.8.15 Patch 46之前的版本、9.0.0 Patch 41之前的版本、10.0.9之前的版本以及10.1.1之前的版本。 

为防范该漏洞，建议用户尽快将Zimbra更新至最新版本，或至少确保postjournal服务处于禁用状态。  


### SMTP漏洞利用脚本

#### 概览

这个脚本用于检查SMTP服务器的漏洞，如果发现存在漏洞，将通过返向沙盒连接获取远程机器的控制权。

#### 功能特性

- 端口检查：验证目标SMTP端口是否打开。
- 漏洞检查：向SMTP服务器发送特定资料包，检查其是否有漏洞。
- 利用和返向沙盒：如果发现服务器存在漏洞，脚本将执行返向沙盒，使你获得远程机器的控制权。

#### 使用步骤

1. 在你的机器上监听：在执行脚本之前，打开一个窗口，监听进来的连接：

   ```bash
   nc -lvnp 4444
   ```

   (请使用你选的端口替换 4444，这个端口应该和脚本中配置的端口一致)

2. 运行脚本：如果服务器有漏洞，它将连回你的机器，使你通过窗口对远程进行控制。

#### 重要注意事项

- **只能用于合法目的**：该脚本只能用于你有明确许可测试漏洞的系统。
- **确保正确的IP配置**：确保脚本中使用了你正确的IP地址，尤其是如果你在本地网以外的地方工作，应该使用你的公共IP。
